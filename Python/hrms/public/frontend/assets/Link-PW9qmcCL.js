import{r as c,c as b,N as V,w as h,z as k,j as q,I as S,q as u,ai as U,a4 as _}from"./frappe-ui-Cee7Yz-T.js";const j={__name:"Link",props:{doctype:{type:String,required:!0},modelValue:{type:String,required:!1,default:""},filters:{type:Object,default:{}},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:m}){const a=l,f=m,y=c(null),r=c(""),n=b({get:()=>a.modelValue,set:t=>{const e=t&&typeof t=="object"&&t.value!==void 0?t.value:t;f("update:modelValue",e||"")}}),s=V({url:"frappe.desk.search.search_link",params:{doctype:a.doctype,txt:r.value,filters:a.filters},method:"POST",transform:t=>t.map(e=>{var p,i;const o=(i=(p=e==null?void 0:e.description)==null?void 0:p.split(","))==null?void 0:i[0];return{label:o?`${o} : ${e.value}`:e.value,value:e.value}})}),d=t=>{s.update({params:{txt:t,doctype:a.doctype}}),s.reload()},v=U(t=>{const e=t||"";e===""&&a.modelValue||r.value!==e&&(r.value=e,d(e))},300);return h(()=>a.doctype,()=>{!a.doctype||a.doctype===s.doctype||d("")},{immediate:!0}),(t,e)=>(q(),k(u(_),{ref_key:"autocompleteRef",ref:y,size:"sm",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),placeholder:t.__("Select {0}",[t.__(l.doctype)]),options:u(s).data,class:S(l.disabled?"pointer-events-none":""),disabled:l.disabled,"onUpdate:query":u(v)},null,8,["modelValue","placeholder","options","class","disabled","onUpdate:query"]))}};export{j as default};
//# sourceMappingURL=Link-PW9qmcCL.js.map
