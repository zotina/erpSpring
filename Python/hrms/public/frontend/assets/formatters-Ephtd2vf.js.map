{"version":3,"file":"formatters-Ephtd2vf.js","sources":["../../../../frontend/src/utils/formatters.js"],"sourcesContent":["import { createDocumentResource } from \"frappe-ui\"\n\nimport dayjs from \"@/utils/dayjs\"\n\nconst settings = createDocumentResource({\n\tdoctype: \"System Settings\",\n\tname: \"System Settings\",\n\tauto: false,\n})\n\nexport const formatCurrency = (value, currency) => {\n\tif (!currency) return value\n\n\t// hack: if value contains a space, it is already formatted\n\tif (value?.toString().trim().includes(\" \")) return value\n\n\tconst locale = settings.doc?.country == \"India\" ? \"en-IN\" : settings.doc?.language\n\n\tconst formatter = Intl.NumberFormat(locale, {\n\t\tstyle: \"currency\",\n\t\tcurrency: currency,\n\t\ttrailingZeroDisplay: \"stripIfInteger\",\n\t\tcurrencyDisplay: \"narrowSymbol\",\n\t})\n\treturn (\n\t\tformatter\n\t\t\t.format(value)\n\t\t\t// add space between the digits and symbol\n\t\t\t.replace(/^(\\D+)/, \"$1 \")\n\t\t\t// remove extra spaces if any (added by some browsers)\n\t\t\t.replace(/\\s+/, \" \")\n\t)\n}\n\nexport const formatTimestamp = (timestamp) => {\n\tconst formattedTime = dayjs(timestamp).format(\"hh:mm a\")\n\n\tif (dayjs(timestamp).isToday()) return formattedTime\n\telse if (dayjs(timestamp).isYesterday()) return `${formattedTime} yesterday`\n\telse if (dayjs(timestamp).isSame(dayjs(), \"year\"))\n\t\treturn `${formattedTime} on ${dayjs(timestamp).format(\"D MMM\")}`\n\n\treturn `${formattedTime} on ${dayjs(timestamp).format(\"D MMM, YYYY\")}`\n}\n"],"names":["settings","createDocumentResource","formatCurrency","value","currency","locale","_a","_b","formatTimestamp","timestamp","formattedTime","dayjs"],"mappings":"qFAIA,MAAMA,EAAWC,EAAuB,CACvC,QAAS,kBACT,KAAM,kBACN,KAAM,EACP,CAAC,EAEYC,EAAiB,CAACC,EAAOC,IAAa,SAIlD,GAHI,CAACA,GAGDD,GAAA,MAAAA,EAAO,WAAW,OAAO,SAAS,KAAM,OAAOA,EAEnD,MAAME,IAASC,EAAAN,EAAS,MAAT,YAAAM,EAAc,UAAW,QAAU,SAAUC,EAAAP,EAAS,MAAT,YAAAO,EAAc,SAQ1E,OANkB,KAAK,aAAaF,EAAQ,CAC3C,MAAO,WACP,SAAUD,EACV,oBAAqB,iBACrB,gBAAiB,cACjB,CAAA,EAGE,OAAOD,CAAK,EAEZ,QAAQ,SAAU,KAAK,EAEvB,QAAQ,MAAO,GAAG,CAEtB,EAEaK,EAAmBC,GAAc,CAC7C,MAAMC,EAAgBC,EAAMF,CAAS,EAAE,OAAO,SAAS,EAEvD,OAAIE,EAAMF,CAAS,EAAE,QAAS,EAASC,EAC9BC,EAAMF,CAAS,EAAE,YAAa,EAAS,GAAGC,CAAa,aACvDC,EAAMF,CAAS,EAAE,OAAOE,EAAK,EAAI,MAAM,EACxC,GAAGD,CAAa,OAAOC,EAAMF,CAAS,EAAE,OAAO,OAAO,CAAC,GAExD,GAAGC,CAAa,OAAOC,EAAMF,CAAS,EAAE,OAAO,aAAa,CAAC,EACrE"}