import{N as k,i as h,c as q,z as w,l as i,e as y,j as b,x as o,k as s,n as R,t as a,q as g,a0 as l}from"./frappe-ui-Cee7Yz-T.js";import A from"./BaseLayout-DMDtw649.js";import x from"./AttendanceRequestItem-BN8PO8eN.js";import V from"./ShiftRequestItem-D3XJomKo.js";import $ from"./ShiftAssignmentItem-BaUJy9HP.js";import m from"./RequestList-BEiYJ3zY.js";import C from"./AttendanceCalendar-BOLvXvt4.js";import{g as L,a as j,b as D,m as N,c as T}from"./attendance-BRvU06nR.js";import"./index-67wm3rxu.js";import"./notifications-DcGs5nX-.js";import"./ListItem-PeN0voCp.js";import"./EmployeeAvatar-DoNux1Vg.js";import"./ShiftIcon-ByQyaDbK.js";import"./requestSummaryFields-du6TJ0Je.js";import"./FormattedField-CUhRRhqS.js";import"./workflow-BVhqibwi.js";import"./formatters-Ephtd2vf.js";const F={class:"flex flex-col mt-7 mb-7 p-4 gap-7"},M={class:"w-full"},z={class:"text-lg text-gray-800 font-bold"},P={class:"text-lg text-gray-800 font-bold"},U={class:"w-full"},Y={class:"text-lg text-gray-800 font-bold"},rt={__name:"Dashboard",setup(E){const v=h("$employee"),c=h("$dayjs"),S=k({url:"hrms.api.get_shifts",auto:!0,cache:"hrms:shifts",makeParams(){var t;return{employee:(t=v.data)==null?void 0:t.name}},transform:t=>t.map(e=>(e.doctype="Shift Assignment",e.is_upcoming=!e.end_date||c(e.end_date).isAfter(c()),e.shift_dates=L(e),e.total_shift_days=j(e),e.shift_timing=D(e),e))}),B=q(()=>{var e;const t=(e=S.data)==null?void 0:e.filter(n=>n.is_upcoming);return t==null?void 0:t.slice(0,5)});return(t,e)=>{const n=y("Button"),u=y("router-link");return b(),w(A,{pageTitle:"Attendance"},{body:i(()=>{var _,d,p,f;return[o("div",F,[s(C),o("div",M,[s(u,{to:{name:"AttendanceRequestFormView"}},{default:i(({navigate:r})=>[s(n,{onClick:r,variant:"solid",class:"w-full py-5 text-base"},{default:i(()=>[R(a(t.__("Request Attendance")),1)]),_:2},1032,["onClick"])]),_:1})]),o("div",null,[o("div",z,a(t.__("Recent Attendance Requests")),1),s(m,{component:l(x),items:(d=(_=g(N))==null?void 0:_.data)==null?void 0:d.slice(0,5),addListButton:!0,listButtonRoute:t.__("AttendanceRequestListView")},null,8,["component","items","listButtonRoute"])]),o("div",null,[o("div",P,a(t.__("Upcoming Shifts")),1),s(m,{component:l($),items:B.value,addListButton:!0,listButtonRoute:"ShiftAssignmentListView",emptyStateMessage:t.__("You have no upcoming shifts")},null,8,["component","items","emptyStateMessage"])]),o("div",U,[s(u,{to:{name:"ShiftRequestFormView"}},{default:i(({navigate:r})=>[s(n,{onClick:r,variant:"solid",class:"w-full py-5 text-base"},{default:i(()=>[R(a(t.__("Request a Shift")),1)]),_:2},1032,["onClick"])]),_:1})]),o("div",null,[o("div",Y,a(t.__("Recent Shift Requests")),1),s(m,{component:l(V),items:(f=(p=g(T))==null?void 0:p.data)==null?void 0:f.slice(0,5),addListButton:!0,listButtonRoute:"ShiftRequestListView"},null,8,["component","items"])])])]}),_:1})}}};export{rt as default};
//# sourceMappingURL=Dashboard-BfrNzdu_.js.map
