import{I as N,a as y}from"./index-67wm3rxu.js";import{r as f,c as p,i as P,z as C,l as r,q as s,a9 as k,e as E,j as h,k as l,x as a,v as B,t as _,f as S,a3 as I,aa as j,I as z,ab as V,ac as c}from"./frappe-ui-Cee7Yz-T.js";import{a as m}from"./notifications-DcGs5nX-.js";const $={class:"flex flex-col h-screen w-screen"},D={class:"w-full sm:w-96"},L={class:"flex flex-row bg-white shadow-sm py-4 px-3 items-center justify-between border-b sticky top-0 z-10"},q={class:"flex flex-row items-center"},A={class:"text-xl font-semibold text-gray-900"},R={class:"flex flex-col gap-5 my-4 w-full p-4"},U={class:"flex flex-col bg-white rounded"},F={key:0,class:"flex -mt-2 items-center justify-center gap-2"},G={class:"text-gray-900 text-sm"},Q={__name:"AppSettings",setup(H){var u;const e=P("$translate"),v=k(),o=f((u=window.frappePushNotification)==null?void 0:u.isNotificationEnabled()),i=f(!1),b=p(()=>{var t;return!((t=window.frappe)!=null&&t.boot.push_relay_server_url&&m.data)||i.value}),d=p(()=>{var t;return(t=window.frappe)!=null&&t.boot.push_relay_server_url&&m.data?"":e("Push notifications have been disabled on your site")}),x=t=>{t?g():(i.value=!0,window.frappePushNotification.disableNotification().then(n=>{o.value=!1,c({title:e("Success"),text:e("Push notifications disabled"),icon:"check-circle",position:"bottom-center",iconClasses:"text-green-500"})}).catch(n=>{c({title:e("Error"),text:e(n.message),icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"})}).finally(()=>{i.value=!1}))},g=()=>{i.value=!0,window.frappePushNotification.enableNotification().then(t=>{t.permission_granted?o.value=!0:(c({title:e("Error"),text:e("Push Notification permission denied"),icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"}),o.value=!1)}).catch(t=>{c({title:e("Error"),text:e(t.message),icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"}),o.value=!1}).finally(()=>{i.value=!1})};return(t,n)=>{const w=E("Button");return h(),C(s(N),null,{default:r(()=>[l(s(y),{class:"ion-padding"},{default:r(()=>[a("div",$,[a("div",D,[a("header",L,[a("div",q,[l(w,{variant:"ghost",class:"!pl-0 hover:bg-white",onClick:n[0]||(n[0]=J=>s(v).back())},{default:r(()=>[l(s(B),{name:"chevron-left",class:"h-5 w-5"})]),_:1}),a("h2",A,_(s(e)("Settings")),1)])]),a("div",R,[a("div",U,[l(s(j),{size:"md",label:s(e)("Enable Push Notifications"),class:z(d.value?"p-2":""),"model-value":o.value,disabled:b.value,description:d.value,"onUpdate:modelValue":x},null,8,["label","class","model-value","disabled","description"])]),i.value?(h(),S("div",F,[l(s(V),{class:"w-3 h-3 text-gray-800"}),a("span",G,_(o.value?s(e)("Disabling Push Notifications..."):s(e)("Enabling Push Notifications...")),1)])):I("",!0)])])])]),_:1})]),_:1})}}};export{Q as default};
//# sourceMappingURL=AppSettings-D-6kffbx.js.map
