import{I,a as B,_ as V}from"./index-67wm3rxu.js";import{c as R,N as S,z as i,l as o,q as e,i as k,a9 as z,e as w,j as n,k as r,x as t,v as m,t as c,f as x,a3 as p,n as v,F as D,H as A,I as H}from"./frappe-ui-Cee7Yz-T.js";import L from"./EmployeeAvatar-DoNux1Vg.js";import{a as M,n as f,u}from"./notifications-DcGs5nX-.js";const P={class:"flex flex-col h-screen w-screen"},T={class:"w-full sm:w-96"},E={class:"flex flex-row bg-white shadow-sm py-4 px-3 items-center justify-between border-b sticky top-0 z-10"},F={class:"flex flex-row items-center"},q={class:"text-xl font-semibold text-gray-900"},U={class:"flex flex-col gap-4 mt-5 p-4"},Y={class:"flex flex-row justify-between items-center"},G={key:0,class:"text-lg text-gray-800 font-semibold"},J={class:"flex ml-auto gap-1"},K={key:0,class:"flex flex-col bg-white rounded"},O={class:"flex flex-col gap-0.5 grow ml-3"},Q=["innerHTML"],W={class:"text-xs font-normal text-gray-500"},oe={__name:"Notifications",setup(X){const y=k("$dayjs"),g=z(),l=k("$translate"),C=R(()=>{var a;return((a=window.frappe)==null?void 0:a.boot.push_relay_server_url)&&M.data}),h=S({url:"hrms.api.mark_all_notifications_as_read",onSuccess(){f.reload()}});function N(a){f.setValue.submit({name:a,read:1},{onSuccess:()=>{u.reload()}})}function $(a){return{name:`${a.reference_document_type.replace(/\s+/g,"")}DetailView`,params:{id:a.reference_document_name}}}return(a,d)=>{const _=w("Button"),j=w("router-link");return n(),i(e(I),null,{default:o(()=>[r(e(B),{class:"ion-padding"},{default:o(()=>{var b;return[t("div",P,[t("div",T,[t("header",E,[t("div",F,[r(_,{variant:"ghost",class:"!pl-0 hover:bg-white",onClick:d[0]||(d[0]=s=>e(g).back())},{default:o(()=>[r(e(m),{name:"chevron-left",class:"h-5 w-5"})]),_:1}),t("h2",q,c(e(l)("Notifications")),1)])]),t("div",U,[t("div",Y,[e(u).data?(n(),x("div",G,c(e(l)("{0} Unread",[e(u).data])),1)):p("",!0),t("div",J,[C.value?(n(),i(_,{key:0,variant:"outline",onClick:d[1]||(d[1]=s=>e(g).push({name:"Settings"}))},{prefix:o(()=>[r(e(m),{name:"settings",class:"w-4"})]),default:o(()=>[v(" "+c(e(l)("Settings")),1)]),_:1})):p("",!0),e(u).data?(n(),i(_,{key:1,variant:"outline",onClick:e(h).submit,loading:e(h).loading},{prefix:o(()=>[r(e(m),{name:"check-circle",class:"w-4"})]),default:o(()=>[v(" "+c(e(l)("Mark all as read")),1)]),_:1},8,["onClick","loading"])):p("",!0)])]),(b=e(f).data)!=null&&b.length?(n(),x("div",K,[(n(!0),x(D,null,A(e(f).data,s=>(n(),i(j,{class:H(["flex flex-row items-start p-4 justify-between border-b before:mt-3","before:content-[''] before:mr-2 before:shrink-0 before:w-1.5 before:h-1.5 before:rounded-full",s.read?"bg-white-500":"before:bg-blue-500"]),key:s.name,to:$(s),onClick:Z=>N(s.name)},{default:o(()=>[r(L,{userID:s.from_user,size:"lg"},null,8,["userID"]),t("div",O,[t("div",{class:"text-sm leading-5 font-normal text-gray-800",innerHTML:s.message},null,8,Q),t("div",W,c(e(y)(s.creation).fromNow()),1)])]),_:2},1032,["class","to","onClick"]))),128))])):(n(),i(V,{key:1,message:e(l)("You have no notifications")},null,8,["message"]))])])])]}),_:1})]),_:1})}}};export{oe as default};
//# sourceMappingURL=Notifications-gBYckt_S.js.map
