{"version":3,"file":"RequestPanel-Dgg9NV7a.js","sources":["../../../../frontend/src/components/RequestPanel.vue"],"sourcesContent":["<template>\n\t<div class=\"w-full\">\n\t\t<TabButtons\n\t\t\t:buttons=\"TAB_BUTTONS\"\n\t\t\tv-model=\"activeTab\"\n\t\t/>\n\t\t<RequestList v-if=\"activeTab == 'My Requests'\" :items=\"myRequests\" />\n\t\t<RequestList\n\t\t\tv-else-if=\"activeTab == 'Team Requests'\"\n\t\t\t:items=\"teamRequests\"\n\t\t\t:teamRequests=\"true\"\n\t\t/>\n\t</div>\n</template>\n\n<script setup>\nimport { ref, inject, onMounted, computed, markRaw } from \"vue\"\n\nimport TabButtons from \"@/components/TabButtons.vue\"\nimport RequestList from \"@/components/RequestList.vue\"\n\nimport { myAttendanceRequests, myShiftRequests, teamShiftRequests, teamAttendanceRequests } from \"@/data/attendance\"\nimport { myClaims, teamClaims } from \"@/data/claims\"\nimport { myLeaves, teamLeaves } from \"@/data/leaves\"\n\nimport AttendanceRequestItem from \"@/components/AttendanceRequestItem.vue\"\nimport ExpenseClaimItem from \"@/components/ExpenseClaimItem.vue\"\nimport LeaveRequestItem from \"@/components/LeaveRequestItem.vue\"\nimport ShiftRequestItem from \"@/components/ShiftRequestItem.vue\"\n\nimport { useListUpdate } from \"@/composables/realtime\"\n\nconst activeTab = ref(\"My Requests\")\nconst socket = inject(\"$socket\")\n\nconst TAB_BUTTONS = [\"My Requests\", \"Team Requests\"] // __(\"My Requests\"), __(\"Team Requests\")\n\nconst myRequests = computed(() =>\n\tupdateRequestDetails(myLeaves, myClaims, myShiftRequests, myAttendanceRequests)\n)\n\nconst teamRequests = computed(() =>\n\tupdateRequestDetails(teamLeaves, teamClaims, teamShiftRequests, teamAttendanceRequests)\n)\n\nfunction updateRequestDetails(leaves, claims, shiftRequests, attendanceRequests) {\n\tconst requests = [leaves, claims, shiftRequests, attendanceRequests].reduce(\n\t\t(acc, resource) => acc.concat(resource?.data || []),\n\t\t[]\n\t)\n\n\tconst componentMap = {\n\t\t\"Leave Application\": LeaveRequestItem,\n\t\t\"Expense Claim\": ExpenseClaimItem,\n\t\t\"Shift Request\": ShiftRequestItem,\n\t\t\"Attendance Request\": AttendanceRequestItem,\n\t}\n\trequests.forEach((request) => {\n\t\trequest.component = markRaw(componentMap[request.doctype])\n\t})\n\n\treturn getSortedRequests(requests)\n}\n\nfunction getSortedRequests(list) {\n\t// return top 10 requests sorted by posting date\n\treturn list\n\t\t.sort((a, b) => {\n\t\t\treturn new Date(b.creation) - new Date(a.creation)\n\t\t})\n\t\t.splice(0, 10)\n}\n\nonMounted(() => {\n\tuseListUpdate(socket, \"Leave Application\", () => teamLeaves.reload())\n\tuseListUpdate(socket, \"Expense Claim\", () => teamClaims.reload())\n\tuseListUpdate(socket, \"Shift Request\", () => teamShiftRequests.reload())\n\tuseListUpdate(socket, \"Attendance Request\", () => teamAttendanceRequests.reload())\n})\n</script>\n"],"names":["activeTab","ref","socket","inject","TAB_BUTTONS","myRequests","computed","updateRequestDetails","myLeaves","myClaims","myShiftRequests","myAttendanceRequests","teamRequests","teamLeaves","teamClaims","teamShiftRequests","teamAttendanceRequests","leaves","claims","shiftRequests","attendanceRequests","requests","acc","resource","componentMap","LeaveRequestItem","ExpenseClaimItem","ShiftRequestItem","AttendanceRequestItem","request","markRaw","getSortedRequests","list","a","b","onMounted","useListUpdate"],"mappings":"o5BAgCA,MAAMA,EAAYC,EAAI,aAAa,EAC7BC,EAASC,EAAO,SAAS,EAEzBC,EAAc,CAAC,cAAe,eAAe,EAE7CC,EAAaC,EAAS,IAC3BC,EAAqBC,EAAUC,EAAUC,EAAiBC,CAAoB,CAC/E,EAEMC,EAAeN,EAAS,IAC7BC,EAAqBM,EAAYC,EAAYC,EAAmBC,CAAsB,CACvF,EAEA,SAAST,EAAqBU,EAAQC,EAAQC,EAAeC,EAAoB,CAChF,MAAMC,EAAW,CAACJ,EAAQC,EAAQC,EAAeC,CAAkB,EAAE,OACpE,CAACE,EAAKC,IAAaD,EAAI,QAAOC,GAAA,YAAAA,EAAU,OAAQ,EAAE,EAClD,CAAA,CACF,EAEOC,EAAe,CACpB,oBAAqBC,EACrB,gBAAiBC,EACjB,gBAAiBC,EACjB,qBAAsBC,CACxB,EACC,OAAAP,EAAS,QAASQ,GAAY,CAC7BA,EAAQ,UAAYC,EAAQN,EAAaK,EAAQ,OAAO,CAAC,CACzD,CAAA,EAEME,EAAkBV,CAAQ,CAClC,CAEA,SAASU,EAAkBC,EAAM,CAEhC,OAAOA,EACL,KAAK,CAACC,EAAGC,IACF,IAAI,KAAKA,EAAE,QAAQ,EAAI,IAAI,KAAKD,EAAE,QAAQ,CACjD,EACA,OAAO,EAAG,EAAE,CACf,CAEA,OAAAE,EAAU,IAAM,CACfC,EAAclC,EAAQ,oBAAqB,IAAMW,EAAW,OAAQ,CAAA,EACpEuB,EAAclC,EAAQ,gBAAiB,IAAMY,EAAW,OAAQ,CAAA,EAChEsB,EAAclC,EAAQ,gBAAiB,IAAMa,EAAkB,OAAQ,CAAA,EACvEqB,EAAclC,EAAQ,qBAAsB,IAAMc,EAAuB,OAAQ,CAAA,CAClF,CAAC"}