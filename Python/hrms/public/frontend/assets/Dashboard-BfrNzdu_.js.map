{"version":3,"file":"Dashboard-BfrNzdu_.js","sources":["../../../../frontend/src/views/attendance/Dashboard.vue"],"sourcesContent":["<template>\n\t<BaseLayout pageTitle=\"Attendance\">\n\t\t<template #body>\n\t\t\t<div class=\"flex flex-col mt-7 mb-7 p-4 gap-7\">\n\t\t\t\t<AttendanceCalendar />\n\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t<router-link :to=\"{ name: 'AttendanceRequestFormView' }\" v-slot=\"{ navigate }\">\n\t\t\t\t\t\t<Button @click=\"navigate\" variant=\"solid\" class=\"w-full py-5 text-base\">\n\t\t\t\t\t\t\t{{ __(\"Request Attendance\") }}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</router-link>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"text-lg text-gray-800 font-bold\">{{ __(\"Recent Attendance Requests\") }}</div>\n\t\t\t\t\t<RequestList\n\t\t\t\t\t\t:component=\"markRaw(AttendanceRequestItem)\"\n\t\t\t\t\t\t:items=\"myAttendanceRequests?.data?.slice(0, 5)\"\n\t\t\t\t\t\t:addListButton=\"true\"\n\t\t\t\t\t\t:listButtonRoute=\"__('AttendanceRequestListView')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"text-lg text-gray-800 font-bold\">{{ __(\"Upcoming Shifts\") }}</div>\n\t\t\t\t\t<RequestList\n\t\t\t\t\t\t:component=\"markRaw(ShiftAssignmentItem)\"\n\t\t\t\t\t\t:items=\"upcomingShifts\"\n\t\t\t\t\t\t:addListButton=\"true\"\n\t\t\t\t\t\tlistButtonRoute=\"ShiftAssignmentListView\"\n\t\t\t\t\t\t:emptyStateMessage=\"__('You have no upcoming shifts')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t<router-link :to=\"{ name: 'ShiftRequestFormView' }\" v-slot=\"{ navigate }\">\n\t\t\t\t\t\t<Button @click=\"navigate\" variant=\"solid\" class=\"w-full py-5 text-base\">\n\t\t\t\t\t\t\t{{ __(\"Request a Shift\") }}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</router-link>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"text-lg text-gray-800 font-bold\">{{ __(\"Recent Shift Requests\") }}</div>\n\t\t\t\t\t<RequestList\n\t\t\t\t\t\t:component=\"markRaw(ShiftRequestItem)\"\n\t\t\t\t\t\t:items=\"myShiftRequests?.data?.slice(0, 5)\"\n\t\t\t\t\t\t:addListButton=\"true\"\n\t\t\t\t\t\tlistButtonRoute=\"ShiftRequestListView\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</BaseLayout>\n</template>\n\n<script setup>\nimport { computed, inject, markRaw } from \"vue\"\nimport { createResource } from \"frappe-ui\"\n\nimport BaseLayout from \"@/components/BaseLayout.vue\"\nimport AttendanceRequestItem from \"@/components/AttendanceRequestItem.vue\"\nimport ShiftRequestItem from \"@/components/ShiftRequestItem.vue\"\nimport ShiftAssignmentItem from \"@/components/ShiftAssignmentItem.vue\"\nimport RequestList from \"@/components/RequestList.vue\"\nimport AttendanceCalendar from \"@/components/AttendanceCalendar.vue\"\n\nimport {\n\tgetShiftDates,\n\tgetTotalShiftDays,\n\tgetShiftTiming,\n\tmyAttendanceRequests,\n\tmyShiftRequests,\n} from \"@/data/attendance\"\n\nconst employee = inject(\"$employee\")\nconst dayjs = inject(\"$dayjs\")\n\nconst shifts = createResource({\n\turl: \"hrms.api.get_shifts\",\n\tauto: true,\n\tcache: \"hrms:shifts\",\n\tmakeParams() {\n\t\treturn {\n\t\t\temployee: employee.data?.name,\n\t\t}\n\t},\n\ttransform: (data) => {\n\t\treturn data.map((assignment) => {\n\t\t\tassignment.doctype = \"Shift Assignment\"\n\t\t\tassignment.is_upcoming = !assignment.end_date || dayjs(assignment.end_date).isAfter(dayjs())\n\t\t\tassignment.shift_dates = getShiftDates(assignment)\n\t\t\tassignment.total_shift_days = getTotalShiftDays(assignment)\n\t\t\tassignment.shift_timing = getShiftTiming(assignment)\n\t\t\treturn assignment\n\t\t})\n\t},\n})\n\nconst upcomingShifts = computed(() => {\n\tconst filteredShifts = shifts.data?.filter((shift) => shift.is_upcoming)\n\n\t// show only 5 upcoming shifts\n\treturn filteredShifts?.slice(0, 5)\n})\n</script>\n"],"names":["employee","inject","dayjs","shifts","createResource","_a","data","assignment","getShiftDates","getTotalShiftDays","getShiftTiming","upcomingShifts","computed","filteredShifts","shift"],"mappings":"+gCAuEA,MAAMA,EAAWC,EAAO,WAAW,EAC7BC,EAAQD,EAAO,QAAQ,EAEvBE,EAASC,EAAe,CAC7B,IAAK,sBACL,KAAM,GACN,MAAO,cACP,YAAa,OACZ,MAAO,CACN,UAAUC,EAAAL,EAAS,OAAT,YAAAK,EAAe,IAC5B,CACE,EACD,UAAYC,GACJA,EAAK,IAAKC,IAChBA,EAAW,QAAU,mBACrBA,EAAW,YAAc,CAACA,EAAW,UAAYL,EAAMK,EAAW,QAAQ,EAAE,QAAQL,EAAO,CAAA,EAC3FK,EAAW,YAAcC,EAAcD,CAAU,EACjDA,EAAW,iBAAmBE,EAAkBF,CAAU,EAC1DA,EAAW,aAAeG,EAAeH,CAAU,EAC5CA,EACP,CAEH,CAAC,EAEKI,EAAiBC,EAAS,IAAM,OACrC,MAAMC,GAAiBR,EAAAF,EAAO,OAAP,YAAAE,EAAa,OAAQS,GAAUA,EAAM,aAG5D,OAAOD,GAAA,YAAAA,EAAgB,MAAM,EAAG,EACjC,CAAC"}